# Flashcard Import Format Specification

## Overview
This document describes the JSON format for importing flashcards into the Simple Anki language learning application. This format is designed to be easily understood and generated by Large Language Models (LLMs) from images or text descriptions of vocabulary pages.

## JSON Structure

### Complete Format
```json
{
  "deck_name": "Spanish Vocabulary - Chapter 1",
  "cards": [
    {
      "front": "hello",
      "back": "hola"
    },
    {
      "front": "goodbye",
      "back": "adiós"
    },
    {
      "front": "thank you",
      "back": "gracias"
    }
  ]
}
```

## Field Specifications

### Root Object

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `deck_name` | string | **Yes** | Name of the deck to import cards into. All cards will be grouped under this deck name. |
| `cards` | array | **Yes** | Array of card objects to import. Must contain at least one card. |

### Card Object

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `front` | string | **Yes** | The word, phrase, or question to learn (shown first to the user). |
| `back` | string | **Yes** | The translation, definition, or answer (shown when user flips the card). |

### Important Notes

1. **Only these two fields are needed per card**: `front` and `back`
2. **Spaced repetition data is auto-generated**: The system automatically initializes:
   - `ease` = 2.5 (learning difficulty factor)
   - `interval` = 0 (days until next review)
   - `next_review` = current timestamp (ready to study immediately)
   - `created_at` = current timestamp
   - `updated_at` = current timestamp
3. **IDs are auto-assigned**: Each card gets a unique ID from the database
4. **Deck name groups related cards**: Use descriptive deck names like "Spanish Chapter 1", "French Verbs", "German Adjectives"

## Example Use Cases

### Example 1: Basic Vocabulary List
```json
{
  "deck_name": "French Basics",
  "cards": [
    {
      "front": "cat",
      "back": "chat"
    },
    {
      "front": "dog",
      "back": "chien"
    },
    {
      "front": "bird",
      "back": "oiseau"
    }
  ]
}
```

### Example 2: Vocabulary with Context
```json
{
  "deck_name": "German A1 - Greetings",
  "cards": [
    {
      "front": "Good morning",
      "back": "Guten Morgen"
    },
    {
      "front": "Good evening",
      "back": "Guten Abend"
    },
    {
      "front": "How are you? (formal)",
      "back": "Wie geht es Ihnen?"
    },
    {
      "front": "How are you? (informal)",
      "back": "Wie geht's?"
    }
  ]
}
```

### Example 3: Verb Conjugations
```json
{
  "deck_name": "Spanish Present Tense - Regular -AR Verbs",
  "cards": [
    {
      "front": "hablar (yo)",
      "back": "hablo"
    },
    {
      "front": "hablar (tú)",
      "back": "hablas"
    },
    {
      "front": "hablar (él/ella/usted)",
      "back": "habla"
    },
    {
      "front": "hablar (nosotros)",
      "back": "hablamos"
    },
    {
      "front": "hablar (vosotros)",
      "back": "habláis"
    },
    {
      "front": "hablar (ellos/ellas/ustedes)",
      "back": "hablan"
    }
  ]
}
```

### Example 4: Phrases with Examples
```json
{
  "deck_name": "Italian Travel Phrases",
  "cards": [
    {
      "front": "Where is the bathroom?",
      "back": "Dov'è il bagno?"
    },
    {
      "front": "How much does it cost?",
      "back": "Quanto costa?"
    },
    {
      "front": "I don't understand",
      "back": "Non capisco"
    },
    {
      "front": "Can you help me?",
      "back": "Può aiutarmi?"
    }
  ]
}
```

### Example 5: Definitions and Concepts
```json
{
  "deck_name": "Japanese Grammar Concepts",
  "cards": [
    {
      "front": "What particle marks the subject?",
      "back": "が (ga)"
    },
    {
      "front": "What particle marks the topic?",
      "back": "は (wa)"
    },
    {
      "front": "What particle marks the direct object?",
      "back": "を (wo/o)"
    }
  ]
}
```

## Instructions for LLMs

When you receive an image or description of a vocabulary page from a textbook, follow these steps:

### Step 1: Identify the Content
- Extract all vocabulary words, phrases, or terms
- Extract their translations, definitions, or answers
- Identify the language pair (e.g., English to Spanish)
- Look for chapter names, lesson numbers, or topic headings

### Step 2: Determine the Deck Name
Create a descriptive deck name that includes:
- Target language name
- Topic, chapter, or lesson identifier
- Optional: Level (A1, A2, Beginner, Intermediate)

**Good examples:**
- "Spanish Vocabulary - Chapter 3"
- "French A2 - Food and Dining"
- "German Beginner - Travel Phrases"
- "Italian Verbs - Present Tense"

**Avoid:**
- Generic names like "Vocabulary" or "Words"
- Just numbers like "Chapter 1"

### Step 3: Structure the Cards
For each vocabulary item:
- **front**: The word/phrase in the source language (usually the language being learned)
- **back**: The translation or definition

**Direction guidelines:**
- If learning Spanish from English: front="hello", back="hola"
- If learning English from Spanish: front="hola", back="hello"
- If the textbook shows "English → Spanish": use English on front, Spanish on back
- If ambiguous, prefer putting the target language (being learned) on the back

### Step 4: Handle Special Cases

**Multiple Meanings:**
```json
{
  "front": "banco",
  "back": "bank (financial) / bench (furniture)"
}
```

**Gender Indicators:**
```json
{
  "front": "the book",
  "back": "das Buch (n.)"
}
```

**Pronunciation Hints:**
```json
{
  "front": "hello",
  "back": "hola (OH-lah)"
}
```

**Verb Forms:**
```json
{
  "front": "to speak (infinitive)",
  "back": "hablar"
}
```

**Example Sentences (if space allows):**
```json
{
  "front": "house",
  "back": "casa\n\nExample: Mi casa es grande. (My house is big.)"
}
```

### Step 5: Validate the JSON
Ensure:
- Valid JSON syntax (proper quotes, commas, brackets)
- `deck_name` is a non-empty string
- `cards` array has at least one card
- Each card has both `front` and `back` fields
- All strings use double quotes
- No trailing commas

### Step 6: Output Format
Provide the complete JSON as a single code block that can be saved to a .json file:

\`\`\`json
{
  "deck_name": "...",
  "cards": [...]
}
\`\`\`

## Common Textbook Layouts

### Layout Type 1: Two Column List
```
English          Spanish
-----------------------
hello            hola
goodbye          adiós
please           por favor
```

**Convert to:**
```json
{
  "deck_name": "Spanish Basic Vocabulary",
  "cards": [
    {"front": "hello", "back": "hola"},
    {"front": "goodbye", "back": "adiós"},
    {"front": "please", "back": "por favor"}
  ]
}
```

### Layout Type 2: Numbered List with Definitions
```
1. gato - cat
2. perro - dog
3. pájaro - bird
```

**Convert to:**
```json
{
  "deck_name": "Spanish Animals",
  "cards": [
    {"front": "cat", "back": "gato"},
    {"front": "dog", "back": "perro"},
    {"front": "bird", "back": "pájaro"}
  ]
}
```

### Layout Type 3: Grouped by Category
```
FOOD
apple - manzana
bread - pan

DRINKS
water - agua
coffee - café
```

**Option 1 (Separate Decks):**
```json
{
  "deck_name": "Spanish Vocabulary - Food",
  "cards": [
    {"front": "apple", "back": "manzana"},
    {"front": "bread", "back": "pan"}
  ]
}
```
```json
{
  "deck_name": "Spanish Vocabulary - Drinks",
  "cards": [
    {"front": "water", "back": "agua"},
    {"front": "coffee", "back": "café"}
  ]
}
```

**Option 2 (Single Deck with Context):**
```json
{
  "deck_name": "Spanish Vocabulary - Food and Drinks",
  "cards": [
    {"front": "apple (food)", "back": "manzana"},
    {"front": "bread (food)", "back": "pan"},
    {"front": "water (drink)", "back": "agua"},
    {"front": "coffee (drink)", "back": "café"}
  ]
}
```

### Layout Type 4: Verb Conjugation Tables
```
HABLAR (to speak)
yo - hablo
tú - hablas
él/ella - habla
```

**Convert to:**
```json
{
  "deck_name": "Spanish Verbs - Hablar (Present Tense)",
  "cards": [
    {"front": "hablar (yo)", "back": "hablo"},
    {"front": "hablar (tú)", "back": "hablas"},
    {"front": "hablar (él/ella)", "back": "habla"}
  ]
}
```

## Error Prevention

### Common Mistakes to Avoid

❌ **Missing quotes:**
```json
{deck_name: "Spanish", cards: [...]}  // Wrong!
```

✅ **Correct:**
```json
{"deck_name": "Spanish", "cards": [...]}
```

❌ **Trailing commas:**
```json
{
  "front": "hello",
  "back": "hola",  // Wrong! Remove trailing comma
}
```

✅ **Correct:**
```json
{
  "front": "hello",
  "back": "hola"
}
```

❌ **Single quotes:**
```json
{'front': 'hello', 'back': 'hola'}  // Wrong!
```

✅ **Correct:**
```json
{"front": "hello", "back": "hola"}
```

❌ **Empty fields:**
```json
{"front": "", "back": "hola"}  // Wrong!
```

✅ **Correct:**
```json
{"front": "hello", "back": "hola"}
```

## Import Process

Once you've generated the JSON file:

1. Save it as a `.json` file (e.g., `spanish-vocab.json`)
2. In the Simple Anki application, go to the "Import" section
3. Upload the JSON file or paste the JSON content
4. Click "Import" to add all cards to the database
5. The cards will be immediately available for study in the specified deck

## Validation Rules

The import system will validate:
- ✅ Valid JSON syntax
- ✅ Required `deck_name` field exists and is non-empty
- ✅ Required `cards` array exists and has at least one card
- ✅ Each card has `front` field (non-empty string)
- ✅ Each card has `back` field (non-empty string)

The import will fail with a descriptive error if any validation fails.

## Success Response

After successful import, you'll receive:
```json
{
  "success": true,
  "imported_count": 15,
  "deck_name": "Spanish Vocabulary - Chapter 1",
  "message": "Successfully imported 15 cards into deck 'Spanish Vocabulary - Chapter 1'"
}
```

---

## Quick Reference for LLMs

**Minimal valid structure:**
```json
{
  "deck_name": "Your Deck Name",
  "cards": [
    {
      "front": "source text",
      "back": "target text"
    }
  ]
}
```

**Remember:**
- Use double quotes for all strings
- No trailing commas
- At least one card required
- Both front and back must be non-empty
- Deck name should be descriptive and specific
